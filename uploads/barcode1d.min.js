function Rotate(e,a,r,t){var n=[];switch(t){case 90:for(var o=0;4*a>o;o+=4)for(var i=4*a*(r-1);i>=0;i-=4*a)n.push(e[o+i]),n.push(e[o+i+1]),n.push(e[o+i+2]),n.push(e[o+i+3]);break;case-90:for(var o=4*a-4;o>=0;o-=4)for(var i=0;i<e.length;i+=4*a)n.push(e[o+i]),n.push(e[o+i+1]),n.push(e[o+i+2]),n.push(e[o+i+3]);break;case 180:for(var="" i="4*a*(r-1);i">=0;i-=4*a)for(var o=4*a-4;o>=0;o-=4)n.push(e[o+i]),n.push(e[o+i+1]),n.push(e[o+i+2]),n.push(e[o+i+3])}return new Uint8ClampedArray(n)}function BoxFilter(e,a,r){for(var t=[],n=[],o=0;a>o;o++){t.push([]),n.push(0);for(var i=0;(r+1)*a>i;i+=a)t[t.length-1].push(e[o+i]),n[n.length-1]=n[n.length-1]+e[o+i]}for(var c=[],i=0;i<e.length;i+=a){for(var o="0;a">o;o++){for(var h=0,l=0,g=o;g>=0&&(h+=n[g],l++,l!=r+1);g--);for(var f=0,g=o+1;a>g&&(h+=n[g],l++,f++,f!=r);g++);l*=t[0].length,h/=l,c.push(h)}if(i-r*a>=0)for(var g=0;g<t.length;g++){var u="t[g].shift();n[g]=n[g]-u}if(i+(r+1)*a<e.length)for(var" g="0;g<t.length;g++){var" c}function="" scale(e,a,r){for(var="" t="[],n=0;n<e.length;n+=8*a)for(var" o="0;4*a">o;o+=8){var i=(e[n+o]+e[n+o+4]+e[n+4*a+o]+e[n+4*a+o+4])/4;t.push(i);var c=(e[n+o+1]+e[n+o+4+1]+e[n+4*a+o+1]+e[n+4*a+o+4+1])/4;t.push(c);var h=(e[n+o+2]+e[n+o+4+2]+e[n+4*a+o+2]+e[n+4*a+o+4+2])/4;t.push(h),t.push(255)}return new Uint8ClampedArray(t)}function IntensityGradient(e,a){for(var r=[],t=Number.MIN_VALUE,n=Number.MAX_VALUE,o=0;o<e.length;o+=4*a)for(var i="0;4*a">i;i+=4){for(var c=0,h=0,l=1;2>l;l++)4*a>i+4*l&&(c+=Math.abs(e[o+i]-e[o+i+4*l])),o+4*a*l<e.length&&(h+=h+math.abs(e[o+i]-e[o+i+4*a*l]));var g="c-h;t=g">t?g:t,n=n>g?g:n,r.push(g)}if(0>n){for(var l=0;l<r.length;l++)r[l]=r[l]-n;n=0}return r}function="" greyscale(e){for(var="" a="0;a<e.length;a+=4){var" r="0,t=255;r=e[a]">r?e[a]:r,r=e[a+1]>r?e[a+1]:r,r=e[a+2]>r?e[a+2]:r,t=e[a]<t?e[a]:t,t=e[a+1]<t?e[a+1]:t,t=e[a+2]<t?e[a+2]:t,e[a]=e[a+1]=e[a+2]=(r+t) 2}}function="" histogram(e){for(var="" a="[],r=0;256">r;r++)a[r]=0;for(var r=0;r<e.length;r+=4)a[e[r]]=a[e[r]]+1;return a}function="" otsu(e,a){for(var="" r="0,t=1;t<e.length;++t)r+=t*e[t];for(var" n,o,i="0,c=0,h=0,l=0,g=0,f=0,u=0,t=0;t<e.length;++t)if(c+=e[t],0!=c){if(h=a-c,0==h)break;i+=t*e[t],n=i/c,o=(r-i)/h,g=c*h*Math.pow(n-o,2),g">=l&&(f=t,g>l&&(u=t),l=g)}return(f+u)/2}function CreateImageData(){Image.data=new Uint8ClampedArray(Image.width*Image.height*4);for(var e,a=0;a<image.height;a++)for(var r="0;r<Image.width;r++)e=4*a*Image.width,Image.data[e+4*r]=Image.table[r][a][0],Image.data[e+4*r+1]=Image.table[r][a][1],Image.data[e+4*r+2]=Image.table[r][a][2],Image.data[e+4*r+3]=Image.table[r][a][3]}function" createscanimagedata(){scanimage.data="new" uint8clampedarray(scanimage.width*scanimage.height*4);for(var="" e,a="0;a<ScanImage.height;a++)for(var" createtable(){image.table="[];for(var" e="[],a=0;a<4*Image.width;a+=4){e=[];for(var" createscantable(){scanimage.table="[];for(var" enlargetable(e,a){for(var="" n="0;n<Image.height;n++)for(var" o="0;e">o;o++)r.push(Image.table[t][n]);Image.table[t]=r.slice()}r=Image.table.slice();for(var t=0;t<image.width;t++)for(var o="0;a">o;o++)Image.table[t*a+o]=r[t].slice();Image.width=Image.table.length,Image.height=Image.table[0].length,CreateImageData()}function ScaleHeight(e){for(var a=[],r=0,t=0,n=0,o=0;o<image.height-e;o+=e)for(var i="0;i<Image.width;i++){r=0,t=0,n=0;for(var" c="o;o+e">c;c++)r+=Image.table[i][c][0],t+=Image.table[i][c][1],n+=Image.table[i][c][2];a.push(r/e),a.push(t/e),a.push(n/e),a.push(255)}return new Uint8ClampedArray(a)}function Intersects(e,a){return e[0][0]<=a[0][1]&&a[0][0]<=e[0][1]&&e[1][0]<=a[1][1]&&a[1][0]<=e[1][1]}function maxlocalization(e,a,r){var="" t="e,n=[];do{for(var" o="a%Image.width,i=(a-o)/Image.width,c=0,h=Image.height,l=0,g=Image.width-1,f=i;f<Image.height-1;f++)if(0==Image.table[o][f+1][0]){h=f;break}for(var" f="i;f">0;f--)if(0==Image.table[o][f-1][0]){c=f;break}for(var u=o;u<image.width-1;u++)if(0==image.table[u+1][i][0]){g=u;break}for(var u="o;u">0;u--)if(0==Image.table[u-1][i][0]){l=u;break}for(var f=c*Image.width;f<=h*image.width;f+=image.width)for(var u="l;g">=u;u++)r[f+u]=0;for(var d=[[l,g],[c,h]],v=0;v<n.length;v++)if(intersects(d,n[v])){if(n[v][0][1]-n[v][0][0]>d[0][1]-d[0][0]){n[v][0][0]=n[v][0][0]<d[0][0]?n[v][0][0]:d[0][0],n[v][0][1]=n[v][0][1]>d[0][1]?n[v][0][1]:d[0][1],d=[];break}n[v][0][0]=n[v][0][0]<d[0][0]?n[v][0][0]:d[0][0],n[v][0][1]=n[v][0][1]>d[0][1]?n[v][0][1]:d[0][1],n[v][1][0]=d[1][0],n[v][1][1]=d[1][1],d=[];break}d.length>0&&n.push(d),e=0,a=0;for(var v=0;v<r.length;v++)r[v]>e&&(e=r[v],a=v)}while(e>.7*t);return n}function ImgProcessing(){greyScale(Image.data);var e=IntensityGradient(Image.data,Image.width);e=BoxFilter(e,Image.width,15);for(var a=e[0],r=1;r<e.length;r++)a=a>e[r]?e[r]:a;for(var t=0,n=0,o=0,r=0;r<e.length;r++)e[r]=math.round(e[r]-a),o+=e[r],t<e[r]&&(t=e[r],n=r);if(o =e.length,15="">o){e=BoxFilter(e,Image.width,8),a=e[0];for(var r=1;r<e.length;r++)a=a>e[r]?e[r]:a;t=0,n=0;for(var r=0;r<e.length;r++)e[r]=math.round(e[r]-a),t<e[r]&&(t=e[r],n=r)}for(var i="[],r=0;t">=r;r++)i[r]=0;for(var r=0;r<e.length;r++)i[e[r]]=i[e[r]]+1;for(var c="otsu(i,e.length),r=0;r<e.length;r++)e[r]<c?Image.data[4*r]=Image.data[4*r+1]=Image.data[4*r+2]=0:Image.data[4*r]=Image.data[4*r+1]=Image.data[4*r+2]=255;CreateTable();for(var" h="maxLocalization(t,n,e),l=[],r=0;r<h.length;r++)l.push({x:h[r][0][0],y:h[r][1][0],width:h[r][0][1]-h[r][0][0],height:h[r][1][1]-h[r][1][0]});l.length">0&&postMessage({result:l,success:"localization"}),allTables=[];for(var r=0;r<h.length;r++){for(var g="[],f=2*h[r][0][0];f<2*h[r][0][1];f++){for(var" u="[],d=2*h[r][1][0];d<2*h[r][1][1];d++)u.push([ScanImage.table[f][d][0],ScanImage.table[f][d][1],ScanImage.table[f][d][2],255]);g.push(u)}g.length<1||(Image.table=g,Image.width=g.length,Image.height=g[0].length,CreateImageData(),allTables.push({table:g,data:new" uint8clampedarray(image.data),width:image.width,height:image.height}))}}function="" showimage(e,a,r){postmessage({result:e,width:a,height:r,success:"image"})}function="" main(){imgprocessing();for(var="" e="[],a=0;a<allTables.length;a++){Image=allTables[a];var" r,t="ScaleHeight(30),n=0,o="",i={},c=[];Selection=!1;do{for(var" h="t.subarray(n,n+4*Image.width),l=[],g=0;256">g;g++)l[g]=0;for(var g=0;g<h.length;g+=4){var f="Math.round((h[g]+h[g+1]+h[g+2])/3);l[f]=l[f]+1}var" u="otsu(l,h.length/4),d=41">u?1:u-40,v=u>214?254:u+40;if(r=yStraighten(h,d,v),Selection=BinaryString(r),Selection.string){o=Selection.format;var C=Selection;Selection=Selection.string,"EAN-13"==o&&("undefined"==typeof i[Selection]?(i[Selection]={count:1,correction:C.correction},c.push(Selection)):(i[Selection].count=i[Selection].count+1,i[Selection].correction=i[Selection].correction+C.correction),Selection=!1)}else Selection=!1;n+=4*Image.width}while(!Selection&&n<t.length);if(selection&&"ean-13"!=o&&e.push({format:o,value:selection}),"ean-13"==o&&(selection=!1),!selection){enlargetable(4,2),n=0,t=scaleheight(20);do{for(var h="t.subarray(n,n+4*Image.width),l=[],g=0;256">g;g++)l[g]=0;for(var g=0;g<h.length;g+=4){var f="Math.round((h[g]+h[g+1]+h[g+2])/3);l[f]=l[f]+1}var" u="otsu(l,h.length/4),d=40">u?0:u-40,v=u>215?255:u+40;if(r=yStraighten(h,d,v),Selection=BinaryString(r),Selection.string){o=Selection.format;var C=Selection;Selection=Selection.string,"EAN-13"==o&&("undefined"==typeof i[Selection]?(i[Selection]={count:1,correction:C.correction},c.push(Selection)):(i[Selection].count=i[Selection].count+1,i[Selection].correction=i[Selection].correction+C.correction),Selection=!1)}else Selection=!1;n+=4*Image.width}while(!Selection&&n<t.length);if("ean-13"==o){var s="{};for(var" m="" in="" i){i[m].correction="i[m].correction/i[m].count;var" i="i[m].correction;I-=i[m].count,I+=c.indexOf(m),s[m]=I}var" p="Number.POSITIVE_INFINITY,A="";for(var" s)s[m]<p&&(p="s[m],A=m);11">p?Selection=A:Selection=!1}Selection&&e.push({Format:o,Value:Selection})}if(e.length>0&&!Multiple)break}return e}function yStraighten(e,a,r){for(var t,n=0,o=new Uint8ClampedArray(Image.width*(r-a+1)*4),i=0;i<o.length;i++)o[i]=255;for(var i="0;i<4*Image.width;i+=4){t=r,n=(e[i]+e[i+1]+e[i+2])/3,i<4*Image.width-4&&(n+=(e[i+4]+e[i+5]+e[i+6])/3,n/=2);for(var" c="i;c<o.length;c+=4*Image.width)t">n&&(o[c]=o[c+1]=o[c+2]=0),t--}return o}function CheckEan13(e,a){if(a){if(5!=e.length)return!1}else if(3!=e.length)return!1;for(var r=0,t=0;t<e.length;t++)r+=e[t];r =e.length;for(var="" t="0;t<e.length;t++)if(e[t]/r<.5||e[t]/r">1.5)return!1;return!0}function TwoOfFiveStartEnd(e,a){if(e.length<5||e.length>6)return!1;for(var r=0,t=[0,0],n=0;n<e.length;n++)e[n]>r&&(r=e[n],t[0]=n);r=0;for(var n=0;n<e.length;n++)n!=t[0]&&e[n]>r&&(r=e[n],t[1]=n);return a?t[0]+t[1]==2:t[0]+t[1]==2}function CheckInterleaved(e,a){for(var r=0,t=0;t<e.length;t++)r+=e[t];if(r =4,a){if(4!="e.length)return!1;for(var" t="0;t<e.length;t++)if(e[t]/r<.5||e[t]/r">1.5)return!1;return!0}if(3!=e.length)return!1;for(var n,o=0,t=0;t<e.length;t++)e[t]>o&&(o=e[t],n=t);if(0!=n)return!1;if(e[0]/r<1.5||e[0] r="">2.5)return!1;for(var t=1;t<e.length;t++)if(e[t] r<.5||e[t]="" r="">1.5)return!1;return!0}function BinaryConfiguration(e,a){var r,t,n=[],o=[],i=0;if("Code128"==a||"Code93"==a){t=6,r=e[0],"Code128"==a&&(r/=2);for(var c=0;c<e.length;c++)if(e[c]>6*r){e.splice(c,e.length);break}do 7==e.length&&"Code128"==a?n.push(e.splice(0,e.length)):n.push(e.splice(0,t)),"Code93"==a&&e.length<6&&e.splice(0,t);while(e.length>0)}if("Code39"==a){t=9,r=e[0];for(var c=0;c<e.length;c++)if(e[c]>5*r){e.splice(c,e.length);break}do n.push(e.splice(0,t)),e.splice(0,1);while(e.length>0)}if("EAN-13"==a){t=4,r=e[0];for(var h=0,c=0;c<e.length;c++)if(e[c]>6*r){e.splice(c,e.length);break}CheckEan13(e.splice(0,3),!1)&&h++;var i=0;do n.push(e.splice(0,t)),i++,6==i&&CheckEan13(e.splice(0,5),!0)&&h++;while(n.length<12&&e.length>0);if(CheckEan13(e.splice(0,3),!1)&&h++,2>h)return[]}if("2Of5"==a){t=5,r=e[0]/2;for(var c=0;c<e.length;c++)if(e[c]>5*r){e.splice(c,e.length);break}var l=e.splice(0,6);n.push(l);do{o=[];for(var c=0;t>c;c++)o.push(e.splice(0,1)[0]),e.splice(0,1)[0];n.push(o),5==e.length&&n.push(e.splice(0,5))}while(e.length>0)}if("Inter2Of5"==a){t=5,r=e[0];for(var c=0;c<e.length;c++)if(e[c]>5*r){e.splice(c,e.length);break}n.push(e.splice(0,4));var g=[];do{o=[],g=[];for(var c=0;t>c;c++)o.push(e.splice(0,1)[0]),g.push(e.splice(0,1)[0]);n.push(o),n.push(g),3==e.length&&n.push(e.splice(0,3))}while(e.length>0)}if("Codabar"==a){t=7,r=e[0];for(var c=0;c<e.length;c++)if(e[c]>5*r){e.splice(c,e.length);break}do n.push(e.splice(0,t)),e.splice(0,1);while(e.length>0)}return n}function BinaryString(e,a){for(var r,t=[],n=[],o=255,i=0,c=0;c<e.length-4*image.width;c+=4*image.width){var h="e.subarray(c,c+4*Image.width);t=[];for(var" l="0;255==h[l];)l+=4;for(;l<h.length;){for(i=0,o=h[l];h[l]==o&&l<h.length;)i++,l+=4;t.push(i)}t.length">2&&t[0]<=t[1] 10&&t.splice(0,2);for(var="" g="t.slice(),f=!1,l=0;l<FormatPriority.length;l++){t=g.slice();var" u,d;if(t="BinaryConfiguration(t,FormatPriority[l]),"2Of5"!=FormatPriority[l]&&"Inter2Of5"!=FormatPriority[l]||(u=t.splice(0,1)[0],d=t.splice(t.length-1,1)[0]),n=Distribution(t,FormatPriority[l]),"EAN-13"==FormatPriority[l]?(t=n.data,corrections=n.correction):t=n,"undefined"!=typeof" t){if(t.length="">4||"Code39"==FormatPriority[l]&&t.length>2)if("Code128"==FormatPriority[l])CheckCode128(t)&&(t=DecodeCode128(t),f=!0);else if("Code93"==FormatPriority[l])CheckCode93(t)&&(t=DecodeCode93(t),f=!0);else if("Code39"==FormatPriority[l])CheckCode39(t)&&(t=DecodeCode39(t),f=!0);else if("EAN-13"==FormatPriority[l]){var v=DecodeEAN13(t);v&&13===v.length&&(t=v,f=!0)}else if("2Of5"==FormatPriority[l]||"Inter2Of5"==FormatPriority[l]){if("2Of5"==FormatPriority[l]){if("undefined"!=typeof u&&!TwoOfFiveStartEnd(u,!0))continue;if("undefined"!=typeof d&&!TwoOfFiveStartEnd(d,!1))continue}if("Inter2Of5"==FormatPriority[l]){if("undefined"!=typeof u&&!CheckInterleaved(u,!0))continue;if("undefined"!=typeof d&&!CheckInterleaved(d,!1))continue}var v=Decode2Of5(t);v&&(t=v,f=!0)}else if("Codabar"==FormatPriority[l]){var v=DecodeCodaBar(t);v&&(t=v,f=!0)}if(f){r=FormatPriority[l],"Inter2Of5"==r&&(r="Interleaved 2 of 5"),"2Of5"==r&&(r="Standard 2 of 5");break}}}if(f)break}return"Code128"==r?"string"==typeof t.string?t:{string:!1}:"string"==typeof t?"EAN-13"==r?{string:t,format:r,correction:corrections}:{string:t,format:r}:{string:!1}}function Distribution(e,a){var r,t,n,a=availableFormats.indexOf(a),o=0,i=[];0===a?(t=11,r=6,n=4):1===a?(t=9,r=6,n=4):2===a?(t=12,r=9):3===a?(t=7,r=4,n=4):6==a&&(r=7);for(var c=0;c<e.length;c++){var h="e[c],l=0;l=0;var" g="0,f=[];if(6!=a)if(4!=a&&5!=a){for(;r">g;)l+=h[g],g++;if(2!==a)if(3!=a){for(g=0;r>g;)f.push(h[g]/l*t),g++;for(g=0;r>g;)f[g]=f[g]>n?n:f[g],f[g]=f[g]<1?1:f[g],f[g]=math.round(f[g]),g++;if(3==a){for(var u="0,d=0;d<f.length;d++)u+=f[d];if(u">7){for(var v=0,C=0,d=0;d<f.length;d++)f[d]>v&&(v=f[d],C=d);f[C]=v-(u-7)}}if(3==a)for(var d=0;d<f.length;d++)o+=math.abs(f[d]-h[d] l*t);i.push(f)}else{for(var="" v="[[0,0],[0,0],[0,0]],s=0;s<h.length;s++){if(h[s]">v[0][0]){v[0][0]=h[s];var m=v[0][1];v[0][1]=s,s=m}if(h[s]>v[1][0]&&s!=v[0][1]){v[1][0]=h[s];var m=v[1][1];v[1][1]=s,s=m}h[s]>v[2][0]&&s!=v[0][1]&&s!=v[1][1]&&(v[2][0]=h[s],v[2][1]=s)}if(v[0][0]/v[1][0]>=3){for(var I=0,s=0;s<h.length;s++)s!=v[0][1]&&(i+=h[s]);i =3;for(var="" s="0;s<h.length;s++)if(s!=v[0][1]&&(h[s]/I<.02||h[s]/I">3))return{data:[],correction:0};if(v[0][0]/I<2.2||v[0][0] i="">6)return{data:[],correction:0};for(var s=0;s<h.length;s++)s==v[0][1]?f.push(4):f.push(1);i.push(f)}else if(v[0][0]="" v[2][0]="">2){var p=v[0][0]+v[1][0];if(p/=5,v[0][0]/(3*p)<.02||v[0][0] (3*p)="">3)return{data:[],correction:0};if(v[1][0]/(2*p)<.02||v[1][0] (2*p)="">3)return{data:[],correction:0};for(var I=0,s=0;s<h.length;s++)s!=v[0][1]&&s!=v[1][1]&&(i+=h[s]);i =2;for(var="" s="0;s<h.length;s++)if(s!=v[0][1]&&s!=v[1][1]&&(h[s]/I<.02||h[s]/I">3))return{data:[],correction:0};for(var s=0;s<h.length;s++)s==v[0][1]?f.push(3):s==v[1][1]?f.push(2):f.push(1);i.push(f)}else{if(v[0][1]%2==v[1][1]%2&&v[0][1]%2==v[2][1]%2){var a="v[0][1]%2;v[2]=[0,0];for(var" s="0;s<h.length;s++)s%2!=A&&h[s]">v[2][0]&&(v[2][0]=h[s],v[2][1]=s)}var p=v[0][0]+v[1][0]+v[2][0];p/=3;for(var s=0;s<v.length;s++)if(v[s][0] p<.02||v[s][0]="" p="">3)return{data:[],correction:0};for(var B=0,s=0;s<h.length;s++)s!=v[0][1]&&s!=v[1][1]&&s!=v[2][1]&&(b=h[s]);if(.02>p/B||p/B>3)return{data:[],correction:0};for(var s=0;s<h.length;s++)s==v[0][1]||s==v[1][1]||s==v[2][1]?f.push(2):f.push(1);i.push(f)}for(var s="0;s<f.length;s++)o+=Math.abs(f[s]-h[s]/l*t)}else{for(var">S[0][0]){S[0][0]=h[s];var m=S[0][1];S[0][1]=s,s=m}h[s]>S[1][0]&&s!=S[0][1]&&(S[1][0]=h[s],S[1][1]=s)}else h[s]>E[0]&&(E[0]=h[s],E[1]=s);if(E[0]/S[0][0]>1.5&&E[0]/S[1][0]>1.5){S=[[0,0],[0,0]];for(var s=0;s<h.length;s++)if(s%2!=0){if(h[s]>S[0][0]&&s!=E[1]){S[0][0]=h[s];var m=S[0][1];S[0][1]=s,s=m}h[s]>S[1][0]&&s!=S[0][1]&&s!=E[1]&&(S[1][0]=h[s],S[1][1]=s)}}var p=S[0][0]+S[1][0]+E[0];if(p/=3,S[0][0]/p>1.6||S[0][0]/p<.4)return[];if(s[1][0] p="">1.6||S[1][0]/p<.4)return[];if(e[0] p="">1.6||E[0]/p<.4)return[];for(var i="0,d=0;d<h.length;d++)d!=S[0][1]&&d!=S[1][1]&&d!=E[1]&&(I+=h[d]);I/=6;for(var" d="0;d<h.length;d++)if(d!=S[0][1]&&d!=S[1][1]&&d!=E[1]&&(h[d]/I">1.6||h[d]/I<.4))return[];for(var s="0;s<h.length;s++)s==S[0][1]||s==S[1][1]||s==E[1]?f.push(2):f.push(1);i.push(f)}}else{for(var" v="[[0,0],[0,0]],d=0;d<h.length;d++){if(!isFinite(h[d]))return[];if(h[d]">v[0][0]){v[0][0]=h[d];var m=v[0][1];v[0][1]=d,d=m-1}h[d]>v[1][0]&&d!=v[0][1]&&(v[1][0]=h[d],v[1][1]=d)}if(Secure2Of5){var p=v[0][0]+v[1][0];if(p/=2,v[0][0]/p>1.3||v[0][0]/p<.7)return[];if(v[1][0] p="">1.3||v[1][0]/p<.7)return[];for(var i="0,d=0;d<h.length;d++)d!=v[0][1]&&d!=v[1][1]&&(I+=h[d]);I/=3;for(var" d="0;d<h.length;d++)if(d!=v[0][1]&&d!=v[1][1]&&(h[d]/I">1.3||h[d]/I<.7))return[]}for(var d="0;d<h.length;d++)d!=v[0][1]&&d!=v[1][1]?f.push(0):f.push(1);i.push(f)}else{var" b="1.5,w=.5;if(7!=h.length)return[];if(0==c||c==e.length-1){for(var" e="[[0,0],[0,0]],S=[0,0],d=0;d<h.length;d++)if(d%2==0)h[d]">S[0]&&(S[0]=h[d],S[1]=d);else{if(h[d]>E[0][0]){E[0][0]=h[d];var m=E[0][1];E[0][1]=d,d=m-1;continue}h[d]>E[1][0]&&d!=E[0][1]&&(E[1][0]=h[d],E[1][1]=d)}if(SecureCodabar){var p=E[0][0]+E[1][0]+S[0];p/=3;for(var y=[E[0][0],E[1][0],S[0]],d=0;d<y.length;d++)if(y[d] p="">b||y[d]/p<w)return[];for(var i="0,d=0;d<h.length;d++)d!=S[1]&&d!=E[0][1]&&d!=E[1][1]&&(I+=h[d]);I/=4;for(var" d="0;d<h.length;d++)if(d!=S[1]&&d!=E[0][1]&&d!=E[1][1]&&(h[d]/I">b||h[d]/I<w))return[]}for(var d="0;d<h.length;d++)d==S[1]||d==E[0][1]||d==E[1][1]?f.push(1):f.push(0)}else{for(var" s="[0,0],E=[0,0],d=0;d<h.length;d++)d%2==0?h[d]">S[0]&&(S[0]=h[d],S[1]=d):h[d]>E[0]&&(E[0]=h[d],E[1]=d);if(S[0]/E[0]>1.55){var F=S;S=[F,[0,0],[0,0]];for(var d=0;d<h.length;d++)if(d%2==0){if(h[d]>S[1][0]&&d!=S[0][1]){S[1][0]=h[d];var m=S[1][1];S[1][1]=d,d=m-1;continue}h[d]>S[2][0]&&d!=S[0][1]&&d!=S[1][1]&&(S[2][0]=h[d],S[2][1]=d)}if(SecureCodabar){var p=S[0][0]+S[1][0]+S[2][0];p/=3;for(var d=0;d<s.length;d++)if(s[d][0] p="">b||S[d][0]/p<w)return[];for(var i="0,d=0;d<h.length;d++)d!=S[0][1]&&d!=S[1][1]&&d!=S[2][1]&&(I+=h[d]);I/=4;for(var" d="0;d<h.length;d++)if(d!=S[0][1]&&d!=S[1][1]&&d!=S[2][1]&&(h[d]/I">b||h[d]/I<w))return[]}for(var d="0;d<h.length;d++)d==S[0][1]||d==S[1][1]||d==S[2][1]?f.push(1):f.push(0)}else{if(SecureCodabar){var" p="S[0]+E[0];if(p/=2,S[0]/p">1.5||S[0]/p<.5)return[];if(e[0] p="">1.5||E[0]/p<.5)return[];for(var i="0,d=0;d<h.length;d++)d!=S[1]&&d!=E[1]&&(I+=h[d]);I/=5;for(var" d="0;d<h.length;d++)if(d!=S[1]&&d!=E[1]&&(h[d]/I">b||h[d]/I<w))return[]}for(var 3="=a?{data:i,correction:o}:i}function" d="0;d<h.length;d++)d==S[1]||d==E[1]?f.push(1):f.push(0)}}i.push(f)}}return" checkcode128(e){var="" a="e[e.length-2].join("");if(a=Code128Encoding.value.indexOf(a),-1==a)return!1;var" r="Code128Encoding.value.indexOf(e[0].join(""));if(-1==r)return!1;var" t="Code128Encoding[e[0].join("")];if("undefined"==typeof" t)return!1;if("a"!="t&&"B"!=t&&"C"!=t)return!1;for(var" n="1;n<e.length-2;n++)if(r+=Code128Encoding.value.indexOf(e[n].join(""))*n,-1===Code128Encoding.value.indexOf(e[n].join("")))return!1;return" r%103="==a}function" decode2of5(e){for(var="" ,r="0;r<e.length;r++){if(-1==TwoOfFiveEncoding.indexOf(e[r].join("")))return!1;a+=TwoOfFiveEncoding.indexOf(e[r].join(""))}return" a}function="" decodecodabar(e){var="" codabarencoding[e[n].join("")])return!1;a+="CodaBarEncoding[e[n].join("")]}return" decodeean13(e){if(12!="e.length)return!1;for(var" o="[],n=0;n<a.length;n++)if("undefined"!=typeof" ean13encoding.l[a[n]])o.push("l");else{if("undefined"="=typeof" ean13encoding.g[a[n]]){r="!0;break}o.push("G")}if(r)return!1;var" i="[];if("undefined"==typeof" ean13encoding.formats[o.join("")])return!1;i.push(ean13encoding.formats[o.join("")]);for(var="" ean13encoding[o[n]][a[n]]){r="!0;break}i.push(EAN13Encoding[o[n]][a[n]])}if(r)return!1;for(var" ean13encoding.r[t[n]]){r="!0;break}i.push(EAN13Encoding.R[t[n]])}if(r)return!1;for(var" c="3,h=0,n=i.length-2;n">=0;n--)h+=i[n]*c,c=3==c?1:3;return h=(10-h%10)%10,i[i.length-1]==h?i.join(""):!1}function CheckCode93(e){var a=e[e.length-3].join(""),r=e[e.length-2].join(""),t=!0;if("undefined"==typeof Code93Encoding[a])return!1;if("undefined"==typeof Code93Encoding[r])return!1;for(var n=Code93Encoding[a].value,o=1,i=0,c=e.length-4;c>0&&(t="undefined"==typeof Code93Encoding[e[c].join("")]?!1:t,t);c--)i+=Code93Encoding[e[c].join("")].value*o,o++,o>20&&(o=1);var h=i%47,l=h===n;if(!l)return!1;if(!t)return!1;i=h,o=2,n=Code93Encoding[r].value;for(var c=e.length-4;c>0&&(t="undefined"==typeof Code93Encoding[e[c].join("")]?!1:t,t);c--)i+=Code93Encoding[e[c].join("")].value*o,o++,o>15&&(o=1);var g=i%47,f=g===n;return f&&l}function CheckCode39(e){var a=!0;if("undefined"==typeof Code39Encoding[e[0].join("")])return!1;if("*"!=Code39Encoding[e[0].join("")].character)return!1;if("undefined"==typeof Code39Encoding[e[e.length-1].join("")])return!1;if("*"!=Code39Encoding[e[e.length-1].join("")].character)return!1;for(var r=1;r<e.length-1;r++)if("undefined"==typeof code39encoding[e[r].join("")]){a="!1;break}return" a}function="" decodecode39(e){for(var="" a="" ,r="!1,t="",n="",o=1;o<e.length-1;o++)t=Code39Encoding[e[o].join("")].character,("$"==t||"/"==t||"+"==t||"%"==t)&&o+1<e.length-1?(r=!0,n=t):r?("undefined"==typeof" extendedencoding[n+t]||(a+="ExtendedEncoding[n+t]),r=!1):a+=t;return" decodecode93(e){for(var="" decodecode128(e){for(var="" a,r="Code128Encoding[e[0].join("")],t="Code128",n="",o=1;o<e.length-2;o++)switch(a=Code128Encoding[e[o].join("")][r]){case"FNC1":1==o&&(t="GS1-128");case"FNC2":case"FNC3":case"FNC4":break;case"SHIFT_B":o++,n+=Code128Encoding[e[o].join("")].B;break;case"SHIFT_A":o++,n+=Code128Encoding[e[o].join("")].A;break;case"Code_A":r="A";break;case"Code_B":r="B";break;case"Code_C":r="C";break;default:n+=a}return{string:n,format:t}}TwoOfFiveEncoding=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"],Code128Encoding={212222:{A:"" ",b:"="" ",c:"00"},222122:{a:"!",b:"!",c:"01"},222221:{a:'"',b:'"',c:"02"},121223:{a:"#",b:"#",c:"03"},121322:{a:"$",b:"$",c:"04"},131222:{a:"%",b:"%",c:"05"},122213:{a:"&",b:"&",c:"06"},122312:{a:"'",b:"'",c:"07"},132212:{a:"(",b:"(",c:"08"},221213:{a:")",b:")",c:"09"},221312:{a:"*",b:"*",c:"10"},231212:{a:"+",b:"+",c:"11"},112232:{a:",",b:",",c:"12"},122132:{a:"-",b:"-",c:"13"},122231:{a:".",b:".",c:"14"},113222:{a:"="" ",c:"15"},123122:{a:"0",b:"0",c:"16"},123221:{a:"1",b:"1",c:"17"},223211:{a:"2",b:"2",c:"18"},221132:{a:"3",b:"3",c:"19"},221231:{a:"4",b:"4",c:"20"},213212:{a:"5",b:"5",c:"21"},223112:{a:"6",b:"6",c:"22"},312131:{a:"7",b:"7",c:"23"},311222:{a:"8",b:"8",c:"24"},321122:{a:"9",b:"9",c:"25"},321221:{a:":",b:":",c:"26"},312212:{a:";",b:";",c:"27"},322112:{a:"<",b:"<",c:"28"},322211:{a:"=",B:" =",c:"29"},212123:{a:"="">",B:">",C:"30"},212321:{A:"?",B:"?",C:"31"},232121:{A:"@",B:"@",C:"32"},111323:{A:"A",B:"A",C:"33"},131123:{A:"B",B:"B",C:"34"},131321:{A:"C",B:"C",C:"35"},112313:{A:"D",B:"D",C:"36"},132113:{A:"E",B:"E",C:"37"},132311:{A:"F",B:"F",C:"38"},211313:{A:"G",B:"G",C:"39"},231113:{A:"H",B:"H",C:"40"},231311:{A:"I",B:"I",C:"41"},112133:{A:"J",B:"J",C:"42"},112331:{A:"K",B:"K",C:"43"},132131:{A:"L",B:"L",C:"44"},113123:{A:"M",B:"M",C:"45"},113321:{A:"N",B:"N",C:"46"},133121:{A:"O",B:"O",C:"47"},313121:{A:"P",B:"P",C:"48"},211331:{A:"Q",B:"Q",C:"49"},231131:{A:"R",B:"R",C:"50"},213113:{A:"S",B:"S",C:"51"},213311:{A:"T",B:"T",C:"52"},213131:{A:"U",B:"U",C:"53"},311123:{A:"V",B:"V",C:"54"},311321:{A:"W",B:"W",C:"55"},331121:{A:"X",B:"X",C:"56"},312113:{A:"Y",B:"Y",C:"57"},312311:{A:"Z",B:"Z",C:"58"},332111:{A:"[",B:"[",C:"59"},314111:{A:"\\",B:"\\",C:"60"},221411:{A:"]",B:"]",C:"61"},431111:{A:"^",B:"^",C:"62"},111224:{A:"_",B:"_",C:"63"},111422:{A:"NUL",B:"`",C:"64"},121124:{A:"SOH",B:"a",C:"65"},121421:{A:"STX",B:"b",C:"66"},141122:{A:"ETX",B:"c",C:"67"},141221:{A:"EOT",B:"d",C:"68"},112214:{A:"ENQ",B:"e",C:"69"},112412:{A:"ACK",B:"f",C:"70"},122114:{A:"BEL",B:"g",C:"71"},122411:{A:"BS",B:"h",C:"72"},142112:{A:"HT",B:"i",C:"73"},142211:{A:"LF",B:"j",C:"74"},241211:{A:"VT",B:"k",C:"75"},221114:{A:"FF",B:"l",C:"76"},413111:{A:"CR",B:"m",C:"77"},241112:{A:"SO",B:"n",C:"78"},134111:{A:"SI",B:"o",C:"79"},111242:{A:"DLE",B:"p",C:"80"},121142:{A:"DC1",B:"q",C:"81"},121241:{A:"DC2",B:"r",C:"82"},114212:{A:"DC3",B:"s",C:"83"},124112:{A:"DC4",B:"t",C:"84"},124211:{A:"NAK",B:"u",C:"85"},411212:{A:"SYN",B:"v",C:"86"},421112:{A:"ETB",B:"w",C:"87"},421211:{A:"CAN",B:"x",C:"88"},212141:{A:"EM",B:"y",C:"89"},214121:{A:"SUB",B:"z",C:"90"},412121:{A:"ESC",B:"{",C:"91"},111143:{A:"FS",B:"|",C:"92"},111341:{A:"GS",B:"}",C:"93"},131141:{A:"RS",B:"~",C:"94"},114113:{A:"US",B:"DEL",C:"95"},114311:{A:"FNC3",B:"FNC3",C:"96"},411113:{A:"FNC2",B:"FNC2",C:"97"},411311:{A:"SHIFT_B",B:"SHIFT_A",C:"98"},113141:{A:"Code_C",B:"Code_C",C:"99"},114131:{A:"Code_B",B:"FNC4",C:"Code_B"},311141:{A:"FNC4",B:"Code_A",C:"Code_A"},411131:{A:"FNC1",B:"FNC1",C:"FNC1"},211412:"A",211214:"B",211232:"C",233111:{A:"STOP",B:"STOP",C:"STOP"},value:["212222","222122","222221","121223","121322","131222","122213","122312","132212","221213","221312","231212","112232","122132","122231","113222","123122","123221","223211","221132","221231","213212","223112","312131","311222","321122","321221","312212","322112","322211","212123","212321","232121","111323","131123","131321","112313","132113","132311","211313","231113","231311","112133","112331","132131","113123","113321","133121","313121","211331","231131","213113","213311","213131","311123","311321","331121","312113","312311","332111","314111","221411","431111","111224","111422","121124","121421","141122","141221","112214","112412","122114","122411","142112","142211","241211","221114","413111","241112","134111","111242","121142","121241","114212","124112","124211","411212","421112","421211","212141","214121","412121","111143","111341","131141","114113","114311","411113","411311","113141","114131","311141","411131","211412","211214","211232","233111"]},Code93Encoding={131112:{value:0,character:"0"},111213:{value:1,character:"1"},111312:{value:2,character:"2"},111411:{value:3,character:"3"},121113:{value:4,character:"4"},121212:{value:5,character:"5"},121311:{value:6,character:"6"},111114:{value:7,character:"7"},131211:{value:8,character:"8"},141111:{value:9,character:"9"},211113:{value:10,character:"A"},211212:{value:11,character:"B"},211311:{value:12,character:"C"},221112:{value:13,character:"D"},221211:{value:14,character:"E"},231111:{value:15,character:"F"},112113:{value:16,character:"G"},112212:{value:17,character:"H"},112311:{value:18,character:"I"},122112:{value:19,character:"J"},132111:{value:20,character:"K"},111123:{value:21,character:"L"},111222:{value:22,character:"M"},111321:{value:23,character:"N"},121122:{value:24,character:"O"},131121:{value:25,character:"P"},212112:{value:26,character:"Q"},212211:{value:27,character:"R"},211122:{value:28,character:"S"},211221:{value:29,character:"T"},221121:{value:30,character:"U"},222111:{value:31,character:"V"},112122:{value:32,character:"W"},112221:{value:33,character:"X"},122121:{value:34,character:"Y"},123111:{value:35,character:"Z"},121131:{value:36,character:"-"},311112:{value:37,character:"."},311211:{value:38,character:" "},321111:{value:39,character:"$"},112131:{value:40,character:"/"},113121:{value:41,character:"+"},211131:{value:42,character:"%"},121221:{value:43,character:"($)"},312111:{value:44,character:"(%)"},311121:{value:45,character:"(/)"},122211:{value:46,character:"(+)"},111141:{value:-1,character:"*"}},Code39Encoding={111221211:{value:0,character:"0"},211211112:{value:1,character:"1"},112211112:{value:2,character:"2"},212211111:{value:3,character:"3"},111221112:{value:4,character:"4"},211221111:{value:5,character:"5"},112221111:{value:6,character:"6"},111211212:{value:7,character:"7"},211211211:{value:8,character:"8"},112211211:{value:9,character:"9"},211112112:{value:10,character:"A"},112112112:{value:11,character:"B"},212112111:{value:12,character:"C"},111122112:{value:13,character:"D"},211122111:{value:14,character:"E"},112122111:{value:15,character:"F"},111112212:{value:16,character:"G"},211112211:{value:17,character:"H"},112112211:{value:18,character:"I"},111122211:{value:19,character:"J"},211111122:{value:20,character:"K"},112111122:{value:21,character:"L"},212111121:{value:22,character:"M"},111121122:{value:23,character:"N"},211121121:{value:24,character:"O"},112121121:{value:25,character:"P"},111111222:{value:26,character:"Q"},211111221:{value:27,character:"R"},112111221:{value:28,character:"S"},111121221:{value:29,character:"T"},221111112:{value:30,character:"U"},122111112:{value:31,character:"V"},222111111:{value:32,character:"W"},121121112:{value:33,character:"X"},221121111:{value:34,character:"Y"},122121111:{value:35,character:"Z"},121111212:{value:36,character:"-"},221111211:{value:37,character:"."},122111211:{value:38,character:" "},121212111:{value:39,character:"$"},121211121:{value:40,character:"/"},121112121:{value:41,character:"+"},111212121:{value:42,character:"%"},121121211:{value:-1,character:"*"}},ExtendedEncoding={"/A":"!","/B":'"',"/C":"#","/D":"$","/E":"%","/F":"&","/G":"'","/H":"(","/I":")","/J":"*","/K":"+","/L":",","/O":"/","/Z":":","%F":";","%G":"<","%h":"=","%i":">","%J":"?","%K":"[","%L":"\\","%M":"]","%N":"^","%O":"_","+A":"a","+B":"b","+C":"c","+D":"d","+E":"e","+F":"f","+G":"g","+H":"h","+I":"i","+J":"j","+K":"k","+L":"l","+M":"m","+N":"n","+O":"o","+P":"p","+Q":"q","+R":"r","+S":"s","+T":"t","+U":"u","+V":"v","+W":"w","+X":"x","+Y":"y","+Z":"z","%P":"{","%Q":"|","%R":"|","%S":"~"},CodaBarEncoding={"0000011":"0","0000110":"1","0001001":"2",1100000:"3","0010010":"4",1000010:"5","0100001":"6","0100100":"7","0110000":"8",1001000:"9","0001100":"-","0011000":"$",1000101:":",1010001:"/",1010100:".","0011111":"+","0011010":"A","0001011":"B","0101001":"C","0001110":"D"},EAN13Encoding={L:{3211:0,2221:1,2122:2,1411:3,1132:4,1231:5,1114:6,1312:7,1213:8,3112:9},G:{1123:0,1222:1,2212:2,1141:3,2311:4,1321:5,4111:6,2131:7,3121:8,2113:9},R:{3211:0,2221:1,2122:2,1411:3,1132:4,1231:5,1114:6,1312:7,1213:8,3112:9},formats:{LLLLLL:0,LLGLGG:1,LLGGLG:2,LLGGGL:3,LGLLGG:4,LGGLLG:5,LGGGLL:6,LGLGLG:7,LGLGGL:8,LGGLGL:9}},self.onmessage=function(e){switch(ScanImage={data:new Uint8ClampedArray(e.data.scan),width:e.data.scanWidth,height:e.data.scanHeight},e.data.rotation){case 8:ScanImage.data=Rotate(ScanImage.data,ScanImage.width,ScanImage.height,-90);var a=e.data.scanWidth;ScanImage.width=ScanImage.height,ScanImage.height=a;break;case 6:ScanImage.data=Rotate(ScanImage.data,ScanImage.width,ScanImage.height,90);var a=e.data.scanWidth;ScanImage.width=ScanImage.height,ScanImage.height=a;break;case 3:ScanImage.data=Rotate(ScanImage.data,ScanImage.width,ScanImage.height,180)}Image={data:Scale(ScanImage.data,ScanImage.width,ScanImage.height),width:ScanImage.width/2,height:ScanImage.height/2},e.data.postOrientation&&postMessage({result:Image,success:"orientationData"}),availableFormats=["Code128","Code93","Code39","EAN-13","2Of5","Inter2Of5","Codabar"],FormatPriority=[];var r=["Code128","Code93","Code39","EAN-13","2Of5","Inter2Of5","Codabar"];SecureCodabar=!0,Secure2Of5=!0,Multiple=!0,"undefined"!=typeof e.data.multiple&&(Multiple=e.data.multiple),"undefined"!=typeof e.data.decodeFormats&&(r=e.data.decodeFormats);for(var t=0;t<r.length;t++)formatpriority.push(r[t]);createtable(),createscantable();var n="Main();n.length">0?postMessage({result:n,success:!0}):postMessage({result:n,success:!1})};</r.length;t++)formatpriority.push(r[t]);createtable(),createscantable();var></","%h":"=","%i":"></e.length-1;r++)if("undefined"==typeof></w))return[]}for(var></.5)return[];for(var></.5)return[];if(e[0]></w))return[]}for(var></w)return[];for(var></s.length;d++)if(s[d][0]></h.length;d++)if(d%2==0){if(h[d]></w))return[]}for(var></w)return[];for(var></y.length;d++)if(y[d]></.7))return[]}for(var></.7)return[];for(var></.7)return[];if(v[1][0]></.4))return[];for(var></.4)return[];for(var></.4)return[];if(e[0]></.4)return[];if(s[1][0]></h.length;s++)if(s%2!=0){if(h[s]></h.length;s++)s==v[0][1]||s==v[1][1]||s==v[2][1]?f.push(2):f.push(1);i.push(f)}for(var></h.length;s++)s!=v[0][1]&&s!=v[1][1]&&s!=v[2][1]&&(b=h[s]);if(.02></v.length;s++)if(v[s][0]></h.length;s++)s==v[0][1]?f.push(3):s==v[1][1]?f.push(2):f.push(1);i.push(f)}else{if(v[0][1]%2==v[1][1]%2&&v[0][1]%2==v[2][1]%2){var></h.length;s++)s!=v[0][1]&&s!=v[1][1]&&(i+=h[s]);i></.02||v[1][0]></.02||v[0][0]></h.length;s++)s==v[0][1]?f.push(4):f.push(1);i.push(f)}else></2.2||v[0][0]></h.length;s++)s!=v[0][1]&&(i+=h[s]);i></f.length;d++)o+=math.abs(f[d]-h[d]></f.length;d++)f[d]></1?1:f[g],f[g]=math.round(f[g]),g++;if(3==a){for(var></e.length;c++){var></=t[1]></e.length-4*image.width;c+=4*image.width){var></e.length;c++)if(e[c]></e.length;c++)if(e[c]></e.length;c++)if(e[c]></12&&e.length></e.length;c++)if(e[c]></e.length;c++)if(e[c]></6&&e.splice(0,t);while(e.length></e.length;c++)if(e[c]></e.length;t++)if(e[t]></1.5||e[0]></e.length;t++)e[t]></e.length;t++)r+=e[t];if(r></e.length;n++)n!=t[0]&&e[n]></e.length;n++)e[n]></5||e.length></e.length;t++)r+=e[t];r></o.length;i++)o[i]=255;for(var></t.length);if("ean-13"==o){var></h.length;g+=4){var></t.length);if(selection&&"ean-13"!=o&&e.push({format:o,value:selection}),"ean-13"==o&&(selection=!1),!selection){enlargetable(4,2),n=0,t=scaleheight(20);do{for(var></h.length;g+=4){var></h.length;r++){for(var></e.length;r++)i[e[r]]=i[e[r]]+1;for(var></e.length;r++)e[r]=math.round(e[r]-a),t<e[r]&&(t=e[r],n=r)}for(var></e.length;r++)a=a></e.length;r++)e[r]=math.round(e[r]-a),o+=e[r],t<e[r]&&(t=e[r],n=r);if(o></e.length;r++)a=a></r.length;v++)r[v]></d[0][0]?n[v][0][0]:d[0][0],n[v][0][1]=n[v][0][1]></d[0][0]?n[v][0][0]:d[0][0],n[v][0][1]=n[v][0][1]></n.length;v++)if(intersects(d,n[v])){if(n[v][0][1]-n[v][0][0]></=h*image.width;f+=image.width)for(var></image.width-1;u++)if(0==image.table[u+1][i][0]){g=u;break}for(var></=a[0][1]&&a[0][0]<=e[0][1]&&e[1][0]<=a[1][1]&&a[1][0]<=e[1][1]}function></image.height-e;o+=e)for(var></image.width;t++)for(var></image.height;a++)for(var></e.length;r+=4)a[e[r]]=a[e[r]]+1;return></t?e[a]:t,t=e[a+1]<t?e[a+1]:t,t=e[a+2]<t?e[a+2]:t,e[a]=e[a+1]=e[a+2]=(r+t)></r.length;l++)r[l]=r[l]-n;n=0}return></e.length&&(h+=h+math.abs(e[o+i]-e[o+i+4*a*l]));var></e.length;o+=4*a)for(var></t.length;g++){var></e.length;i+=a){for(var></e.length;i+=4*a)n.push(e[o+i]),n.push(e[o+i+1]),n.push(e[o+i+2]),n.push(e[o+i+3]);break;case>